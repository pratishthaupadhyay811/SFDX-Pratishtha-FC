<apex:page standardController="Opportunity" extensions="OverrideViewExtension"  action="{!if(IsCommunityuser, communityUrl,URLFOR($Action.Opportunity.View,Opportunity.Id, [retURL=''], true))}" sidebar="false" showHeader="false"></apex:page>